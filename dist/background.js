(()=>{"use strict";class e{constructor(t="google",a="google",o="en",n="zh-CN"){this.searchEngine=t,this.translateSite=a,this.translateFrom=o,this.translateTo=n,this.search=(t,a)=>{let o="";switch(a){case"yahoo":o+=e.YAHOO+encodeURIComponent(t);break;case"bing":o+=e.BING+encodeURIComponent(t);break;case"duckduckgo":o+=e.DUCKDUCKGO+encodeURIComponent(t);break;case"sogou":o+=e.SOGOU+encodeURIComponent(t);break;case"baidu":o+=e.BAIDU+encodeURIComponent(t);break;case"yandex":o+=e.YANDEX+encodeURIComponent(t);break;default:o+=e.GOOGLE+encodeURIComponent(t)}this.createTab(o)};let s=this;chrome.storage.sync.get("translateFrom",(function(e){s.translateFrom=e.translateFrom||"en"})),chrome.storage.sync.get("translateTo",(function(e){s.translateTo=e.translateTo||"zh-CN"})),chrome.runtime.onMessage.addListener((function(t){let a=t.selectedText;switch(t.type){case"translate":chrome.storage.sync.get(["translateSite","translateFrom","translateTo"],(function(t){s.translateSite=t.translateSite||"google",s.translateFrom=t.translateFrom||"en",s.translateTo=t.translateTo||"zh-CN";let o=encodeURIComponent(a.trim()),n="";"baidu"===s.translateSite&&("zh-CN"===s.translateFrom&&(s.translateFrom="zh"),"zh-CN"===s.translateTo&&(s.translateTo="zh"),n=e.BAIDU_TRANSLATE_URL+"#"+s.translateFrom+"/"+s.translateTo+"/"+o),n=e.GOOGLE_TRANSLATE_URL+"?sl=auto&tl="+s.translateTo+"&text="+o+"&op=translate",s.createTab(n)}));break;case"link":let t=a.substr(0,7),o=a.substr(0,8);"http://"==t||"https://"==o?s.createTab(a):s.createTab("http://"+a);break;default:chrome.storage.sync.get("searchEngine",(function(e){s.searchEngine=e.searchEngine||"google",s.search(a,s.searchEngine)}))}}))}createTab(e){chrome.tabs.create({url:e,active:!0},(function(e){}))}}e.GOOGLE="https://www.google.com/search?q=",e.YAHOO="https://search.yahoo.com/search?p=",e.BING="https://www.bing.com/search?q=",e.DUCKDUCKGO="https://www.duckduckgo.com/?q=",e.SOGOU="https://www.sogou.com/web?query=",e.BAIDU="https://www.baidu.com/s?wd=",e.YANDEX="https://yandex.ru/yandsearch?text=",e.GOOGLE_TRANSLATE_URL="https://translate.google.com",e.BAIDU_TRANSLATE_URL="https://fanyi.baidu.com",new e})();