(()=>{"use strict";class e{constructor(t="google",a="googleTrans",n="en",s="zh-CN"){this.searchEngine=t,this.translateSite=a,this.translateFrom=n,this.translateTo=s,this.search=(t,a)=>{let n="";switch(a){case"bing":n+=e.BING+encodeURIComponent(t);break;case"duckduckgo":n+=e.DUCKDUCKGO+encodeURIComponent(t);break;case"sogou":n+=e.SOGOU+encodeURIComponent(t);break;case"baidu":n+=e.BAIDU+encodeURIComponent(t);break;case"yahoo":n+=e.YAHOO+encodeURIComponent(t);break;case"yandex":n+=e.YANDEX+encodeURIComponent(t);break;default:n+=e.GOOGLE+encodeURIComponent(t)}this.createTab(n)};let o=this;chrome.storage.sync.get("translateFrom",(function(e){o.translateFrom=e.translateFrom||"en"})),chrome.storage.sync.get("translateTo",(function(e){o.translateTo=e.translateTo||"zh-CN"})),chrome.runtime.onMessage.addListener((function(t){let a=t.selectedText;switch(t.type){case"translate":chrome.storage.sync.get(["translateSite","translateFrom","translateTo"],(function(t){o.translateSite=t.translateSite||"googleTrans",o.translateFrom=t.translateFrom||"en",o.translateTo=t.translateTo||"zh-CN";let n=encodeURIComponent(a.trim()),s="";"baiduTrans"===o.translateSite&&("zh-CN"===o.translateFrom&&(o.translateFrom="zh"),"zh-CN"===o.translateTo&&(o.translateTo="zh"),s=e.BAIDU_TRANSLATE_URL+"#"+o.translateFrom+"/"+o.translateTo+"/"+n),s=e.GOOGLE_TRANSLATE_URL+"?sl=auto&tl="+o.translateTo+"&text="+n+"&op=translate",o.createTab(s)}));break;case"link":let t=a.substr(0,7),n=a.substr(0,8);"http://"==t||"https://"==n?o.createTab(a):o.createTab("http://"+a);break;default:chrome.storage.sync.get("searchEngine",(function(e){o.searchEngine=e.searchEngine||"google",o.search(a,o.searchEngine)}))}}))}createTab(e){chrome.tabs.create({url:e,active:!0},(function(e){}))}}e.GOOGLE="https://www.google.com/search?q=",e.BING="https://www.bing.com/search?q=",e.DUCKDUCKGO="https://www.duckduckgo.com/?q=",e.SOGOU="https://www.sogou.com/web?query=",e.BAIDU="https://www.baidu.com/s?wd=",e.YAHOO="https://search.yahoo.com/search?p=",e.YANDEX="https://yandex.ru/yandsearch?text=",e.GOOGLE_TRANSLATE_URL="https://translate.google.com",e.BAIDU_TRANSLATE_URL="https://fanyi.baidu.com",new e})();