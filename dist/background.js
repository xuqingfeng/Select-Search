(()=>{"use strict";class e{constructor(t="google",a="cn",s="en",n="zh-CN"){this.searchEngine=t,this.translateSite=a,this.translateFrom=s,this.translateTo=n,this.search=(t,a)=>{let s="";switch(a){case"google":s+=e.GOOGLE+encodeURIComponent(t);break;case"yahoo":s+=e.YAHOO+encodeURIComponent(t);break;case"bing":s+=e.BING+encodeURIComponent(t);break;case"duckduckgo":s+=e.DUCKDUCKGO+encodeURIComponent(t);break;case"sogou":s+=e.SOGOU+encodeURIComponent(t);break;case"baidu":s+=e.BAIDU+encodeURIComponent(t);break;case"yandex":s+=e.YANDEX+encodeURIComponent(t)}this.createTab(s)};let o=this;chrome.storage.sync.get("translateFrom",(function(e){o.translateFrom=e.translateFrom||"en"})),chrome.storage.sync.get("translateTo",(function(e){o.translateTo=e.translateTo||"zh-CN"})),chrome.runtime.onMessage.addListener((function(t){let a=t.selectedText;switch(t.type){case"search":chrome.storage.sync.get("searchEngine",(function(e){o.searchEngine=e.searchEngine||"google",o.search(a,o.searchEngine)}));break;case"translate":chrome.storage.sync.get(["translateSite","translateFrom","translateTo"],(function(t){o.translateSite=t.translateSite||"cn",o.translateFrom=t.translateFrom||"en",o.translateTo=t.translateTo||"zh-CN";let s=encodeURIComponent(a.trim()),n=e.GOOGLE_TRANSLATE_URL+"?sl=auto&tl="+o.translateTo+"&text="+s+"&op=translate";o.createTab(n)}));break;case"link":let t=a.substr(0,7),s=a.substr(0,8);"http://"==t||"https://"==s?o.createTab(a):o.createTab("http://"+a)}}))}createTab(e){chrome.tabs.create({url:e,active:!0},(function(e){}))}}e.GOOGLE="https://www.google.com/search?q=",e.YAHOO="https://search.yahoo.com/search?p=",e.BING="https://www.bing.com/search?q=",e.DUCKDUCKGO="https://www.duckduckgo.com/?q=",e.SOGOU="https://www.sogou.com/web?query=",e.BAIDU="https://www.baidu.com/s?wd=",e.YANDEX="https://yandex.ru/yandsearch?text=",e.GOOGLE_TRANSLATE_URL="https://translate.google.com",new e})();